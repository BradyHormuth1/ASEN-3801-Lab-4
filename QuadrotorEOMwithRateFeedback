function var_dot = QuadrotorEOMwithRateFeedback(t, var, g, m, I, d, km, nu, mu)
% Compute control from current state
[Fc, Gc] = RotationDerivativeFeedback(var, m, g);

% Compute motor forces
f = ComputeMotorForces(Fc, Gc, d, km);

% Use new motor forces as feedback
var_dot = QuadrotorEOM(t, var, g, m, I, d, km, nu, mu, f);
end
